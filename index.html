<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <title>Digital Mastermind | PRJ3</title>
</head>
<body>
    <div class="leaderboard__card">
        <div class="leaderboard__screen">
            <h1 id="text"> <mark>DIGITAL MASTERMIND</mark> </h1>
        </div>
        <div class="button__container">
            <div class="left"></div>
            <button class ="center" onclick="buttonFunction()">enter</button>
            <div class="right"></div>
        </div>
        <table class="content__table">
            <div id='showTable'></div>
        </table>
        <div class="sensor__container">
            <div class="sensor1" onclick="Function1()"></div>
            <div class="sensor2" onclick="Function2()"></div>
            <div class="sensor3" onclick="Function3()"></div>
            <div class="sensor4" onclick="Function4()"></div>
        </div>
        <button class="sensor__button" onclick="sensorButton()">enter</button>
    </div>
</body>
<script>
    // Create XMLHttpRequest object.
    var oXHR = new XMLHttpRequest();

    // Initiate request.
    oXHR.onreadystatechange = reportStatus;
    oXHR.open("GET", "../../update.json", true);  // get json file.
    oXHR.send();

    function reportStatus() {
        if (oXHR.readyState == 4) {		// Check if request is complete.

            // Create an HTML table using response from server.
            createTableFromJSON(this.responseText);
        }
    }

    // Create an HTML table using the JSON data.
    function createTableFromJSON(jsonData) {
        var array = JSON.parse(jsonData); 	// Convert JSON to array.
        var col = [];
        for (var i = 0; i < array.length; i++) {
            for (var key in array[i]) {
                if (col.indexOf(key) == -1) {
                    col.push(key);
                }
            }
        }

        // Create a dynamic table.
        var table = document.createElement("table");

        // Create table header.

        var tr = table.insertRow(-1);                   // Table row.

        for (var i = 0; i < col.length; i++) {
            var th = document.createElement("th");      // Table header.
            th.innerHTML = col[i];
            tr.appendChild(th);
        }

        // Add JSON to the table rows.
        for (var i = 0; i < array.length; i++) {

            tr = table.insertRow(-1);

            for (var j = 0; j < col.length; j++) {
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = array[i][col[j]];
            }
        }

        // Finally, add the dynamic table to a container.
        var divContainer = document.getElementById("showTable");
        divContainer.innerHTML = "";
        divContainer.appendChild(table);
    };

</script>

<script>
    function buttonFunction() {
        document.getElementById("text").innerHTML = "MAIN MENU LEADERBOARD";
        setTimeout(function(){ 
            document.getElementById("text").innerHTML = "DIGITAL MASTERMIND";
            }, 3000);
    }

    function Function1() {
        document.documentElement.style.backgroundColor="green";
    }

    function Function2() {
        document.documentElement.style.backgroundColor="yellow";
    }

    function Function3() {
        document.documentElement.style.backgroundColor="red";
    }

    function Function4() {
        document.documentElement.style.backgroundColor="rgb(13, 109, 116)";
    }

    function sensorButton() {
        document.getElementById("text").innerHTML = "Evaluating guess ...";
        setTimeout(function(){ 
            document.getElementById("text").innerHTML = "DIGITAL MASTERMIND";
            }, 3000);
    }
</script>

</html>

<!-- inspiration til javascript hentet herfra: https://www.encodedna.com/javascript/how-to-read-data-from-external-json-file-in-javascript.htm-->